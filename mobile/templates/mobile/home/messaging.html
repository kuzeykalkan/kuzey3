<ion-view class="has-giphy vivify fadeIn" ng-class="{'show-gif': isGifShown}" style="background: #fff;" >
<ion-view title="" hide-nav-bar="true">
    <div class="navigation-bar2" data-role="navigation-bar2" style="border:none" data-qa="navbar">
        <div class="navigation-bar__primary" ng-click="goBack()">
            <div class="navigation-bar__icon js-goto">
                <div class="icon" data-qa="icon">
                        <svg class="icon__content icon__content--inactive">
<svg viewBox="0 0 64 64" id="navigation-bar-back" width="100%" height="100%"><path d="M12.05 33.28l13.83 13.83-1.81 1.81L7.4 32.25l.26-.26-.23-.24 16.6-16.67 1.82 1.81-13.78 13.83h44.25v2.56H12.05z"></path></svg>
                    </svg>
                </div>
            </div>
        </div>
      
      
              <div class="navigation-bar__secondary">
            <div class="chat-v2-switcher">
                <div class="chat-v2-userpic">
                    <div class="navigation-bar__userpic" ng-click="showUserOptions()" style="
    position: absolute;
    left: 293px;
" >
                        <div class="brick brick--xsm" style="margin-right: 20px">
                            <div class="brick__image" style="background-image: url({{photo}})"></div>
                        </div>
                    </div>
                </div>
            </div>           
        </div>
      
      
        <div class="navigation-bar__title" data-qa="navbar-title" ng-click="showUserOptions()">
           
            <div class="navigation-bar__title_"><span class="chat-v2-name comforta">{{name}} <small style="margin-left: 5px;font-size: 10px;position: absolute;right: 24px;top: 7px" ng-if="viewCredits"></small></span>
            

            
            </div>
                 
                   <div class="chat-switchers__item"  style="margin-left: 5px;font-size: 10px;position: absolute;right: 24px;top: 4px" ng-if="videocallEnabled"  ng-click="startVideocall(1)">
            <i class="icon-svg icon-svg--stretch">
<svg viewBox="0 0 64 64" id="navigation-bar-video" width="100%" height="100%"><path fill-rule="nonzero" d="M7.64 11.75a63.96 63.96 0 0 1 4.63-.76c3.71-.47 7.98-.75 12.76-.75 4.78 0 8.64.25 11.66.68 1.84.26 3.01.52 3.47.68 2.92.62 5.69 3.39 6.23 6.2a39.08 39.08 0 0 1 .7 3.6c.44 2.94.7 6.42.7 10.46 0 4.04-.26 7.52-.69 10.45a39.08 39.08 0 0 1-.69 3.52 8.62 8.62 0 0 1-6.2 6.27c-.6.2-1.75.45-3.52.7-3.02.42-6.88.68-11.66.68s-9.05-.28-12.77-.75a64.21 64.21 0 0 1-4.58-.75c-2.95-.53-5.74-3.24-6.28-6.06a39.08 39.08 0 0 1-.7-3.6 72.48 72.48 0 0 1-.7-10.46c0-4.04.26-7.52.69-10.45a39.08 39.08 0 0 1 .7-3.57c.62-2.92 3.4-5.62 6.25-6.1zm-4.04 6.6l-.21.88c-.15.7-.3 1.53-.45 2.51-.42 2.82-.66 6.2-.66 10.12 0 3.92.24 7.3.66 10.12a36.83 36.83 0 0 0 .66 3.4c.4 2 2.45 4 4.54 4.37l1.1.22c.94.17 2.04.34 3.3.5 3.63.46 7.81.73 12.5.73 4.67 0 8.42-.25 11.33-.66a30.9 30.9 0 0 0 3.2-.62l.14-.04c1.98-.38 4.05-2.47 4.5-4.6l.19-.8c.15-.69.3-1.53.45-2.5.41-2.82.66-6.2.66-10.12 0-3.93-.25-7.3-.66-10.12a36.83 36.83 0 0 0-.67-3.4c-.39-2.01-2.46-4.08-4.61-4.54-.1-.03-.33-.1-.7-.18a30.9 30.9 0 0 0-2.5-.45 83.06 83.06 0 0 0-11.34-.65c-4.68 0-8.86.27-12.48.72a61.7 61.7 0 0 0-4.46.74 6.08 6.08 0 0 0-4.49 4.37zm55.06-.03l.22-.08c2.57-.67 4.84.87 4.84 3.38v19.34c0 2.5-2.29 4.04-4.84 3.38l-.22-.09-4.5-2.25c-2.26-.99-4.1-3.47-4.1-5.6V26.18c0-2.1 1.84-4.59 4.07-5.58l4.53-2.27zm-3.54 4.32l-.05.02c-1.46.64-2.73 2.36-2.73 3.5v10.25c0 1.16 1.26 2.86 2.78 3.53l4.44 2.22c1.12.25 1.88-.3 1.88-1.2V21.62c0-.92-.75-1.45-1.88-1.2l-4.44 2.22z" fill='#111'></path></svg>                
            </i>
        </div> 
           
            <div class="navigation-bar__title-additional" ng-if="status && !writing" style="color:#59c449 visibility: hidden;" >{{alang[36].text}}

            </div>
            <div class="navigation-bar__title-additional" ng-if="!status && !writing">{{alang[249].text}}

            </div>
            <div class="navigation-bar__title-additional" ng-show="writing">{{alang[209].text}}...</div>            
        </div>

    </div>   
  </ion-nav-title>
    <div class="page overlay-page stickers visible" ng-if="gift"  style="z-index: 600;background: rgba(255,255,255,.7);">
        <div class="stickers-body">
            <div class="stickers-showcase">
                <div class="stickers-showcase__item js-sticker" ng-repeat="g in gifts track by $index" >
                    <div class="stickers-showcase__item_ selected" ng-click="sendGift(gift.icon,gift.price)"> 
                        <div class="stickers-showcase__image js-preload" style="background-image: url({{g.icon}});"></div>
                    </div>
                </div>                              
            </div>
        </div>

        <div class="floating-action stickers-promo">
            <div class="cta-box cta-box--compact">
                <div class="cta-box__header cta-box__header--xsm">{{alang[210].text}} {{name}}</div>
                <div class="cta-box__buttons">
                    <div class="button-wrapper">
                        <button class="button" style="background: #5d06b5;color:#fff" >
                            <div class="button__content"><span class="button__text">{{alang[110].text}}</span></div></button>
                    </div>
                </div>
            </div>
        </div>        
    </div>
	<div class="chat-initial" ng-if="wait">
	    <div class="chat-blocker-stub"></div>
	    <div class="chat-blocker js-blocker qa-blocker">
	        <div class="cta-box">
	            <div class="cta-box__content" ng-show="!isGiftShown">
	                <div class="chat-blocker-info">
	                    <div class="chat-blocker-info__image">
	                        <div class="gift gift--sm">
	                            <div class="gift__image"><img src="img/chat-initial-gift.png" alt=""></div>
	                        </div>
	                    </div>
	                    <div class="chat-blocker-info__text">{{alang[211].text}}:</div>
	                </div>
	            </div>
	            <div class="cta-box__buttons">
	                <button class="button button--primary" ng-click="openGift()">
	                    <div class="button__content"><span class="button__text">{{alang[161].text}}</span></div></button>
	            </div>
	        </div>
	    </div>
	</div>


<div class="chat-v2__controls is-chat-messaging" ng-if="!chatLimit" ng-show='!maxDaily'>
    <div class="chat-input">
        <div class="chat-input__mirror"></div>
<input id="chat-input-textarea" focus-me="focusInput" class="chat-input__textarea ng-pristine ng-valid ng-empty ng-touched" placeholder="Escribir mensaje" style="margin-bottom: 20px; border: 0px solid rgb(255, 255, 255); width: 100%; height: 81px; background: rgb(244, 242, 253); border-radius: 0px; padding-left: 15px;" ng-show="!isGifShown" ng-model="message" ng-keyup="refreshTypingStatus(message)">
        <input class="chat-input__textarea js-chat-input qa-input-textarea" placeholder="{{alang[111].text}}" 
        	ng-model="gifQuery" ng-change="newGif(gifQuery)" ng-model-options="{ debounce: 500 }" ng-show="isGifShown" />       	        
        <label for="chat-input-textarea" class="chat-input__label"></label>
    </div>
    <div class="chat-switchers" style="top: 8px;">
   

        <div class="chat-switchers__item " ng-click="sendPhoto(1)">
	        <i class="icon-svg icon-svg--stretch" style=" width: 48px; height: 48px; left: -10px; ">
<svg width="35px" height="35px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M4 12H20M12 4V20" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
	        </i>
        </div>
        <div class="chat-switchers__item " ng-click="openGift()">
	        <i class="icon-svg icon-svg--stretch">
<svg width="35px" height="35px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M19 10.0802V20.0802H5V10.0802M19 10.0802H5M19 10.0802H20V7.0802H4V10.0802H5M12 7.0802C12.8333 5.24687 14.9999 1.5802 16.9999 3.5802C18.9999 5.5802 14.5 6.91353 12 7.0802ZM12 7.0802C11.1667 5.24687 8.99999 1.5802 6.99999 3.5802C4.99999 5.5802 9.5 6.91353 12 7.0802Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
	        </i>
        </div>



                                          

    </div>
<div class="chat-send comforta ng-binding" style="color: #a12ded;top: 4px;/* left: 55px; */width: 76px;height: 64px;right: -10px;font-size: 20px;font-weight: 700;" ng-if="message.length == 0"> <svg viewBox="-2.4 -2.4 28.80 28.80" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#000000" style="
    width: 52px;
    height: 59px;
"><g id="SVGRepo_bgCarrier" stroke-width="0" style="
    width: 64px;
    height: 64px;
"><rect x="-2.4" y="-2.4" width="28.80" height="28.80" rx="14.4" fill="#a12ded" strokewidth="0"></rect></g><g  id="SVGRepo_iconCarrier"> <path d="M20 12L4 4L6 12M20 12L4 20L6 12M20 12H6" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>{{alang[110].text}}</div>  

  
  
  
    <div class="chat-send comforta" style="color: rgb(164, 45, 237);top: 5px;right: 9px;height: 64px;width: 64px;" ng-show="message.length > 0" ng-click="sendText(message);message = '';" > <svg viewBox="-2.4 -2.4 28.80 28.80" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#000000" style="
    width: 64px;
    height: 64px;
"><g id="SVGRepo_bgCarrier" stroke-width="0" style="
    width: 64px;
    height: 64px;
"><rect x="-2.4" y="-2.4" width="28.80" height="28.80" rx="14.4" fill="#a12ded" strokewidth="0"></rect></g><g  id="SVGRepo_iconCarrier"> <path d="M20 12L4 4L6 12M20 12L4 20L6 12M20 12H6" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
{{alang[110].text}}</div>
</div>	

<style>
    
    ion-content[delegate-handle="userMessageScroll"] {
/*  background: url("https://kissmeet.online/home.png")*/ no-repeat; /* Resminizin gerçek yolunu yazın */
  background-size: cover; /* Resmi tüm alana yayar */
  padding-bottom: 20px;
  border-top: 2px solid #eee;
}
    
</style>

  <ion-content  delegate-handle="userMessageScroll"  on-swipe-right="goToChat()" style="   padding-bottom:20px;border-top:2px solid #eee;">

    <div class="chat visible animated fadeIn">
        <div class="chat-v2 js-chat-v2">
            <div>
                <div class="ice-breaker" ng-if="messages.length == 0">
                    <div class="ice-breaker__userpic">
                        <div class="brick">
                            <div class="brick__image" style="background-image: url({{photo}})"></div>
                        </div>
                    </div>
                    <div class="ice-breaker__text">{{alang[212].text}} {{name}} {{alang[213].text}}.</div>
                </div>

                <div class="chat-v2__messages">
                    <div class="chat-v2__status qa-chat-section-title" ng-if="moreMen" ng-click="loadMoreMen(15)">
                    {{alang[106].text}} {{totalMen}} {{alang[107].text}}</div>

	                <div class="contact-list__loader_inline" style="margin-top: 150px;" ng-if="loader" >
	                    <div class="loader small grey centered ">
	                        <div class="first dot"></div>
	                        <div class="second dot"></div>
	                        <div class="third dot"></div>
	                    </div>
	                </div>

                   <div class="chat-message" ng-repeat="item in messages track by $index"
                    ng-hide="messages.length - showm > $index" ng-class="item.isMe?'chat-message--out chat-message--blue':'chat-message--in chat-message--grey'">
                        <div class="chat-message__container">
                            <div id="me"  ng-if="item.isMe"></div>
                            <div id="you" ng-if="!item.isMe"></div>

                            <div class="chat-message__text" ng-if="item.story == 0" ng-class="{noBackground: item.type == 'image'}">
                                <div class="chat-message__text_" ng-if="item.type !== 'image'" ng-bind-html="item.body | nl2br"></div>

                                <img ng-src="{{item.body}}" style="width: 220px;border-radius: 5px;margin-right: 5px;" alt="" ng-click="openChatImageModal('{{item.body}}')" ng-if="item.type == 'image' && item.photo == 1">

                                <img ng-src="{{item.body}}" style="width: 140px;border-radius: 5px;margin-right: 5px;" alt="" ng-click="openChatImageModal('{{item.body}}')" ng-if="item.type == 'image' && item.photo == 0 || item.type == 'gif' || item.type == 'gift'">                                
                                
                            </div>

                            <div class="chat-message__text" ng-if="item.story > 0" ng-class="{noBackground: item.type == 'story'}">
                                <img ng-src="{{item.storyData.story}}" ng-if="item.storyData.storyType == 'image'" style="width: 180px;border-radius: 5px;margin-right: 5px;">

                                <video src="{{item.storyData.story}}" ng-if="item.storyData.storyType == 'video'" type="video/mp4" muted="" preload="" style="width: 180px;border-radius: 5px;margin-right: 5px;"></video>                                
                            </div>
                            <br ng-if="item.story > 0">
                            <div class="chat-message__text_" ng-if="item.story > 0" style="color: #333;font-size: 12px" ng-bind-html="lang[657].text | nl2br"></div>
                            <div class="chat-message__text" ng-if="item.story > 0">   
                                <div class="chat-message__text_" ng-bind-html="item.body | nl2br"></div>
                            </div>                            


                        </div>
                        <div class="chat-message__status " ng-if="item.seen == 0">{{alang[214].text}}</div>
                        <div class="chat-message__status " ng-if="item.seen == 1">{{alang[215].text}}</div>
                    </div>

                   <div class="chat-message js-chat-message" ng-repeat="item in nmessages | orderBy : 'id' track by $index"
                        ng-class="item.isMe?'chat-message--out chat-message--blue':'chat-message--in chat-message--grey'">
                        <div class="chat-message__container">

                            <div class="chat-message__text"  ng-class="{noBackground: item.type == 'image'}">
                                <div class="chat-message__text_" ng-if="item.type !== 'image' && item.type !== 'gif' && item.type !== 'gift'" ng-bind-html="item.body | nl2br"></div>

                                <img ng-src="{{item.body}}" style="width: 140px;border-radius: 5px;margin-right: 5px;" alt="" ng-click="openChatImageModal('{{item.body}}')" ng-if="item.type == 'image' || item.type == 'gif' || item.type == 'gift'">                                
                                
                            </div>      

                        </div>
                        <div class="chat-message__status " ng-if="item.seen == 0">{{alang[214].text}}</div>
                        <div class="chat-message__status " ng-if="item.seen == 1">{{alang[215].text}}</div>
                    </div> 

                   <div class="chat-message js-chat-message chat-message--grey" ng-if="writing">
                        <div class="chat-message__container" style="margin-top: 5px;">
                            <div class="chat-message__text">
                                <div class="chat-message__text_">
                                    <div class="loader small grey ">
                                        <div class="first dot"></div>
                                        <div class="second dot"></div>
                                        <div class="third dot"></div>
                                    </div>                                    
                                </div>
                           </div>
                        </div>
                    </div>                                        			        			        		        	
						                                                                              
                </div>
                <div class="chat-v2__spacing-stub js-chat-spacing-stub" style="height: 138px;"></div>
            </div>
        </div>
    </div>
</div>
  </ion-content>
	<div class="wrapper-reward" ng-show="sendGiftShow">
		<div class="modal-reward modal--congratulations  animated fadeIn">
			<div class="modal-reward-top">
				<div class="klose animated fadeInUp" ng-click="cancelGift()" >
					<i class="icon ion-close-round" style="margin-left:7px;line-height:27px;"></i>
				</div>
				<img class="modal-reward-icon u-imgResponsive animated fadeInUp" src="{{gift_icon}}">
				<div class="modal-reward-header animated fadeInUp comforta">{{alang[108].text}} {{name}}</div>
				<div class="modal-reward-subheader animated fadeInUp comforta">{{alang[109].text}} <strong>{{gift_price}}</strong> {{alang[48].text}}</div>
			</div>
			<div class="modal-reward-bottom" ng-click="sendGiftBtn(gift_icon,gift_price);cancelGift();">
				<button class="modal-reward-btn u-btn u-btn--danger mi-pollita gradient32 comforta" style="font-weight: 700">{{alang[110].text}}</button>
			</div>
		</div>
	</div>
  <div class="giphy-container" ng-show="isGifShown" style="bottom: 80px">
    <div class="text-center" ng-show="isGifLoading">
      <ion-spinner icon="ios"></ion-spinner>  
    </div>
    <ion-scroll direction="x" class="scroll-horizontal">
      <div class="text-center scroll-item" ng-repeat="gif in gifs track by $index" ng-click="sendGif(gif.images.fixed_height_small.url)">
        <img ng-src="{{gif.images.fixed_height_small.url}}" alt="">
      </div>
    </ion-scroll>
  </div>
  
  <div class="giphy-container" ng-show="isGiftShown"  style="bottom: 80px">
    <ion-scroll direction="x" class="scroll-horizontal">
      <div class="text-center scroll-item" ng-repeat="gift in gifts track by $index" ng-click="sendGift(gift.icon,gift.price)">
        <img ng-src="{{gift.icon}}" style="width:90px;margin-right:5px;border:1px solid #eee">
      </div>
    </ion-scroll>
  </div>  
  
  <div ng-show="chatLimit" >
		<div class="credits-section text-center" style="background:#fff;padding-top:15px;margin-top:45px">
			<h5 class="mi-pollita" style="color:#BFC5D5">{{alang[112].text}}</h5>					
			<div class="wrapper text-center">
			  <div class="pos-rlt">
				<div class="thumb-xxl rounded profileP border-profile" style="background-image:url({{photo}});height:{{w}}px;width:{{w}}px;" ></div>						
			  </div>
			</div>						
			<h1>{{lang[200].text}}</h1>
			<h4 >{{lang[1034].text}}</h4>
			<center><span class="spotlight-me" ng-click="openPremiumModal()"  style="background:#275BDF;border:#025BDF">{{lang[144].text}}</span></center>                    
		</div>
  </div>

    <div flow-init
         flow-name="uploader.flow"
         flow-files-added="processFiles($files)">
      <button flow-btn type="file" id="uploadSendPhoto" style="display: none;"></button>
     </div>    
</ion-view>
